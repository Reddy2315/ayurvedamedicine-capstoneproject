<button mat-raised-button color="primary" (click)="goBack()">Back</button>

<div class="order-list-container">
    <h2>Orders History</h2>

    <!-- Check if orders exist -->
    <div *ngIf="orders && orders.length > 0; else noOrders">
      <mat-card *ngFor="let order of orders" class="order-card">
        <mat-card-header>
          <mat-card-subtitle>Status: {{ order.status }}</mat-card-subtitle>
          <mat-card-subtitle>Order Date: {{ order.orderDate | date : 'dd-MM-YYYY' }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <table class="order-details-table">
            <thead>
              <tr>
                <th>Medicine Name</th>
                <th>Company Name</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Manufacturing Date</th>
                <th>Expiry Date</th>
                <th>Category</th>
                <th>Item Total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of order.orderItems">
                <td>{{ medicineMap[item.medicineId].name }}</td>
                <td>{{ medicineMap[item.medicineId].companyName }}</td>
                <td>{{ medicineMap[item.medicineId].price | currency:'INR': 'symbol': '1.2-2' }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ medicineMap[item.medicineId].mfd | date }}</td>
                <td>{{ medicineMap[item.medicineId].expiryDate | date }}</td>
                <td>{{ medicineMap[item.medicineId].category.name }}</td>
                <td>{{ item.itemTotal }}</td>
              </tr>
            </tbody>
          </table>
          <div class="order-summary">
            <p><strong>Total Amount:</strong> {{ order.orderAmount | currency:'INR': 'symbol': '1.2-2'}}</p>
          </div>
          
              <button mat-raised-button color="warn" 
                      (click)="cancelOrder(order.id)" 
                      [disabled]="isCancelButtonDisabled(order.status)">
                Cancel Order
              </button>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Display this if no orders are found -->
    <ng-template #noOrders>
      <p>No orders are present.</p>
    </ng-template>
</div>
